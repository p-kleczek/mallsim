\chapter{Model centrum handlowego}
\label{cha:mall-model}

Na model centrum handlowego sk³ada siê zarówno opis jego geometrii (tj. przebieg œcian, rozk³ad wejœæ i wyjœæ), jak równie¿ rozk³ad stref specjalnych, które w swego rodzaju aktywny sposób wp³ywaj¹ na zachowanie pieszych - mowa o \emph{atraktorach}, \emph{kolejkach} i \emph{miejscach oczekiwania}. Umo¿liwiaj¹ one symulujacjê takich zachowañ, jak \emph{grupowanie siê} czy \emph{kolejkowani} poprzez modyfikacjê domyœlnego algorytmu ruchu fazy taktycznej. Istnienie stref specjalnych stwierdzono doœwiadczalnie na podstawie obserwacji ruchu ludzi w Galerii Krakowskiej.

Wszystkie powy¿sze elementy zilustrowano na rys. \ref{fig:overview}.

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.3]{./img/Overview.jpg}
	\caption{Zastosowana dekompozycja problemu.}
	\label{fig:overview}
\end{figure}

%---------------------------------------------------------------------------

\section{Atraktor}
\label{sec:attractors}

Atraktor ma za zadanie modelowaæ obecnoœæ przedmiotu lub zjawiska, które przykuwa uwagê ludzi na terenie centrum handlowego, a wynikiem jego dzia³ania jest spontaniczne powstawanie skupisk ludzi, tzw. grupowanie siê (Rys. \ref{fig:crowding}). Atraktory ró¿ni¹ siê miêdzy sob¹ typami, a ró¿ne typy przyci¹gaj¹ uwagê ró¿nego rodzaju agentów, co odzwierciedla ró¿nice w preferencjach ludzi przebywaj¹cych w centrum handlowym. W wiêkszoœci przypadków atraktor nie wystêpuje pojedynczo, lecz tworzy strefy, w których wyró¿niæ mo¿na Ÿród³o zjawiska przyci¹gaj¹cego uwagê o radialnym gradiencie spadku si³y przyci¹gania.

Dzia³anie atraktora opiera siê na modyfikowaniu szacowanego kosztu ruchu dla danej p³ytki wykorzystywanego póŸniej przez algorytm A*.

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.4]{./img/Crowding.jpg}
	\caption{Grupowanie siê agentów w obrêbie atraktora.}
	\label{fig:crowding}
\end{figure}

%---------------------------------------------------------------------------

\section{Kolejka}
\label{sec:queues}

Strefa kolejki s³u¿y modelowaniu zjawiska \emph{œcis³ego kolejkowania siê} ludzi (na przyk³ad przy kasie sklepowej lub na stopniach schodów ruchomych), co nie wynika z ogólnego modelu ruchu (Rys. \ref{fig:queueing}).

Kolejka to w zasadzie ci¹g atraktorów tak silnie oddzia³uj¹cych na pieszych, ¿e po wejœciu na jedno z pól kolejki dalszy ruch mo¿liwy jest tylko na kolejne z jej pól. Dodatkowo pola kolejki powoduj¹ zatrzymanie agenta na danej p³ytce na pewn¹ iloœæ cykli symulacji, co oddaje okres oczekiwania na obs³u¿enie.

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.4]{./img/Queueing_model.jpg}
	\caption{Kolejkowanie siê ludzi przy kasie sklepowej z zaznaczon¹ kolejk¹ œcis³¹.}
	\label{fig:queueing}
\end{figure}

%---------------------------------------------------------------------------

\section{Przejœcia}
\label{sec:passages}

Strefy przejœcia modeluj¹ ci¹gi komunikacyjne prowadz¹ce bezpoœrednio do przejœæ pomiêdzy piêtrami centrum handlowego - klatek schodowych, schodów ruchomych, wind itp. (Rys. \ref{fig:passing-through}).

W obrêbie strefy przejœæ, podobnie jak w przypadku kolejek, modyfikowane s¹ preferencje odleg³oœciowe agentów (innymi s³owy zmienia siê wp³yw naruszania strefy komfortu na ruch agenta), dziêki czemu mo¿liwe jest zmniejszenie odleg³oœci miêdzy pieszymi, co nie wynika z ogólnego modelu ruchu.

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.4]{./img/EntranceExits.jpg}
	\caption{Poruszanie siê agenta po schodach ruchomych pomiêdzy piêtrami centrum handlowego.}
	\label{fig:passing-through}
\end{figure}

%---------------------------------------------------------------------------

\section{Wejœcia/wyjœcia}
\label{sec:entrance-exits}

Wejœcia i wyjœcia to jedyne miejsca, w których mo¿e pojawiæ siê nowy agent - klient centrum handlowego - oraz jedyne miejsca, w których mo¿e on zakoñczyæ swoj¹ wizytê w centrum handlowym.

%---------------------------------------------------------------------------

\section{Miejsca oczekiwania}
\label{sec:holders}

Miejsce oczekiwania odzwierciedla takie obiekty centrum handlowego, jak ³aweczki b¹dŸ stoliki - miejsca, w których klienci przysiadaj¹ i spêdzaj¹ pewien okres czasu w bezruchu.

Dzia³anie miejsca oczekiwania polega na zatrzymaniu wszelkiej aktywnoœci agenta na okres pewnej liczby cykli symulacji.

\begin{figure}[h]
	\centering
	\includegraphics[scale=0.4]{./img/Held.jpg}
	\caption{Klienci centrum odpoczywaj¹cy na ³awce.}
	\label{fig:held-down}
\end{figure}

%---------------------------------------------------------------------------

\section{Uwagi}
\label{sec:notes}

Nale¿y zaznaczyæ, ¿e na chwilê obecn¹ potencja³ niektórych z elementów modelu centrum handlowego nie zosta³ w pe³ni wykorzystany. Przyk³adem wiêkszej integracji stref specjalnych z modelem ruchu mog³yby byæ uwzglêdnienie potrzeb osób starszych do robienia czêstych odpoczynków poprzez dodawanie miejsca oczekiwania - ³awki - do celów podró¿y (we w miarê regularnych odstêpach czasu).